angular.module("tw.form-styling", []);
!function(a){function b(){return{restrict:"A",link:function(a,b){if(!b.affix)return void console.log("twAffix requires bootstrap.js");var c=b[0],d={};(c.getAttribute("data-offset-top")||c.getAttribute("data-offset-bottom"))&&(d.offset={}),c.getAttribute("data-offset-top")&&Number(c.getAttribute("data-offset-top"))&&(d.offset.top=Number(c.getAttribute("data-offset-top"))),c.getAttribute("data-offset-bottom")&&Number(c.getAttribute("data-offset-bottom"))&&(d.offset.bottom=Number(c.getAttribute("data-offset-bottom"))),b.affix(d)}}}a.module("tw.form-styling").directive("twAffix",b)}(window.angular),function(a){"use strict";function b(){return{restrict:"C",link:d}}function c(){return{restrict:"A",link:d}}function d(a,b){var c=$(b).closest(".form-group");$(b).on("focus",function(){c.addClass("focus")}).on("blur",function(){c.removeClass("focus")})}a.module("tw.form-styling").directive("formControl",b),a.module("tw.form-styling").directive("twFocusable",c)}(window.angular),function(a){function b(){return{restrict:"A",link:function(a,b){if(!b.popover)return void console.log("twPopOver requires tooltip from bootstrap.js");var c={},d=b[0];d.getAttribute("data-trigger")?"hover"===d.getAttribute("data-trigger")&&(c.trigger="hover focus"):c.trigger="focus",d.getAttribute("data-placement")||(c.placement="top"),d.getAttribute("data-content-html")&&(c.html=!0),b.popover(c),d.setAttribute("tabindex","0"),d.setAttribute("role","button"),d.setAttribute("data-toggle","popover")}}}a.module("tw.form-styling").directive("twPopOver",b)}(window.angular),function(a){"use strict";function b(){function a(a,b){return a[b-1]&&"*"!==a[b-1]}function b(a,b){return a.substring(0,b-1)+a.substring(b,a.length)}function c(a,b){console.log("patternise: "+b);for(var c="",d=0,e=0;e<a.length;e++)e>=b.length+d||("*"===a[e]?(console.log("1 "+e+", "+d),c+=b[e-d]):(console.log("2"),c+=a[e],d++));return b.substring(a.length-d,b.length)&&(c+=b.substring(a.length-d,b.length)),console.log("patternise end: "+c),c}function d(a,b){console.log("unpatternise: "+b);for(var c=0;c<a.length;c++)"*"!==a[c]&&(b=b.replace(a[c],""));return b}return{restrict:"A",require:"ngModel",scope:{twPresentationPattern:"@"},controller:["$element","$timeout","$scope","$attrs","$parse",function(e,f,g,h,i){function j(){var a=e.val();console.log("listener"),e.val(l(a))}function k(a){if(!a)return a;var b=e.attr("tw-presentation-pattern");return d(b,a)}function l(a){if(a=k(a),!a)return"";var b=e.attr("tw-presentation-pattern");return c(b,a)}function m(a,b){for(var c=0,d=0;d<b;d++)d>=a.length||"*"!==a[d]&&c++;return c}function n(a){return a.selectionStart}function o(a,b){a.setSelectionRange(b,b)}function p(c){var d=c.keyCode||c.which,g=n(c.target),h=e.attr("tw-presentation-pattern"),i=m(h,g);s.indexOf(d)>=0||f(function(){var f=d===r.backspace?g-1:g+1,j=e.val(),n=m(h,f);if(d===r.backspace){if(console.log("backspace"),a(h,g)){var p;p=b(j,g-1),console.log("after remove: "+p),p=l(k(p)),e.val(p),q.$setViewValue(p)}}else console.log("timeout"),e.val(l(k(e.val())));o(c.target,f+(n-i))})}var q=e.controller("ngModel");console.log(h),g.$watch(g.twPresentationPattern,function(a,b){console.log(a)}),q.$render=function(){e.val(l(q.$viewValue))},q.$formatters.push(l),q.$parsers.push(k),f(function(){var a=q.$validators.minlength,b=q.$validators.maxlength;a&&(q.$validators.minlength=function(b,c){return a(b,k(c))}),b&&(q.$validators.maxlength=function(a,c){return b(a,k(c))})}),e.bind("change",j),e.bind("keydown",function(a){p(a)}),e.bind("paste cut",function(){f(function(){j(),o(e[0],e.val().length)})}),e.bind("copy",function(){f(function(){o(e[0],e.val().length)})});var r={cmd:224,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,end:35,home:36,left:37,up:38,right:39,down:40,"delete":46},s=[r.cmd,r.enter,r.shift,r.ctrl,r.alt,r.left,r.up,r.right,r.down]}]}}a.module("tw.form-styling").directive("twPresentationPattern",b)}(window.angular),function(a){function b(){return{restrict:"A",link:function(a,b){if(!b.tooltip)return void console.log("twToolTip requires bootstrap.js");var c=b[0],d={};c.getAttribute("data-placement")||(d.placement="top"),b.tooltip(d),c.setAttribute("tabindex","0"),c.setAttribute("data-toggle","tooltip")}}}a.module("tw.form-styling").directive("twToolTip",b)}(window.angular);