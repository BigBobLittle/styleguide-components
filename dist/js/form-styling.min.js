angular.module("tw.form-styling", []);
!function(a){function b(){return{restrict:"A",link:function(a,b){if(!b.affix)return void console.log("twAffix requires bootstrap.js");var c=b[0],d={};(c.getAttribute("data-offset-top")||c.getAttribute("data-offset-bottom"))&&(d.offset={}),c.getAttribute("data-offset-top")&&Number(c.getAttribute("data-offset-top"))&&(d.offset.top=Number(c.getAttribute("data-offset-top"))),c.getAttribute("data-offset-bottom")&&Number(c.getAttribute("data-offset-bottom"))&&(d.offset.bottom=Number(c.getAttribute("data-offset-bottom"))),b.affix(d)}}}a.module("tw.form-styling").directive("twAffix",b)}(window.angular),function(a){"use strict";function b(){return{restrict:"C",link:d}}function c(){return{restrict:"A",link:d}}function d(a,b){var c=$(b).closest(".form-group");$(b).on("focus",function(){c.addClass("focus")}).on("blur",function(){c.removeClass("focus")})}a.module("tw.form-styling").directive("formControl",b),a.module("tw.form-styling").directive("twFocusable",c)}(window.angular),function(a){function b(){return{restrict:"A",link:function(a,b){if(!b.popover)return void console.log("twPopOver requires tooltip from bootstrap.js");var c={},d=b[0];d.getAttribute("data-trigger")?"hover"===d.getAttribute("data-trigger")&&(c.trigger="hover focus"):c.trigger="focus",d.getAttribute("data-placement")||(c.placement="top"),d.getAttribute("data-content-html")&&(c.html=!0),b.popover(c),d.setAttribute("tabindex","0"),d.setAttribute("role","button"),d.setAttribute("data-toggle","popover")}}}a.module("tw.form-styling").directive("twPopOver",b)}(window.angular),function(a){"use strict";function b(){function a(a,b){var c=d(a,b);return b-c-1}function b(a,b){var d=c(a,b);return b+d+1}function c(a,b){for(var c=0,d=b;d<a.length;d++)"*"!==a[d]&&c++;return c}function d(a,b){for(var c=0;a[b-c-1]&&"*"!==a[b-c-1];)c++;return c}function e(a,b,c){return a.substring(0,b-1)+a.substring(c-1,a.length)}function f(a,b,c){for(var d=0,e=0,f=g(a),i=0;i<b.length&&i<=c.length+d;i++)"*"===b[i]?c[i-d]&&(e=0):(d++,i<f&&e++);e&&(console.log("moveCursor"),h(a,f+e))}function g(a){return console.log("getPos "+a.selectionStart),a.selectionStart}function h(a,b){console.log("setPos "+b),a.setSelectionRange(b,b)}return{restrict:"A",require:"ngModel",scope:{twPresentationPattern:"@"},controller:["$element","$timeout","$scope","$attrs","$parse","TwTextFormatting",function(c,i,j,k,l,m){function n(){var a=c.val();console.log("listener"),c.val(p(o(a)))}function o(a){if(console.log("unformat"),!a)return a;var b=c.attr("tw-presentation-pattern");return m.unformatUsingPattern(a,b)}function p(a){if(console.log("format"),!a)return"";var b=c.attr("tw-presentation-pattern"),d=m.formatUsingPattern(a,b);return f(c[0],b,a),d}function q(f){console.log("keypress");var j=f.keyCode||f.which;if(!(t.indexOf(j)>=0)){var k=g(f.target);console.log("initialPos: "+k),i(function(){var i=c.attr("tw-presentation-pattern"),l=(j===s.backspace?k-1:k+1,c.val());g(f.target);if(j===s.backspace){console.log("backspace");var m=d(i,k),n=l;m&&(n=e(l,k-m,k),console.log("after remove: "+n)),n=p(o(n)),c.val(n),r.$setViewValue(n),h(f.target,a(i,k))}else console.log("timeout"),c.val(p(o(c.val()))),console.log("newPos: "+b(i,k)),h(f.target,b(i,k))})}}var r=c.controller("ngModel");console.log(k),j.$watch(j.twPresentationPattern,function(a,b){console.log(a)}),r.$render=function(){console.log("render"),c.val(p(r.$viewValue))},r.$formatters.push(function(a){return console.log("formatters"),p(a)}),r.$parsers.push(function(a){return console.log("parsers"),o(a)}),i(function(){var a=r.$validators.minlength,b=r.$validators.maxlength;a&&(r.$validators.minlength=function(b,c){return console.log("minlength"),a(b,o(c))}),b&&(r.$validators.maxlength=function(a,c){return console.log("maxlength"),b(a,o(c))})}),c.bind("change",n),c.bind("keydown",function(a){q(a)}),c.bind("paste cut",function(){i(function(){n(),h(c[0],c.val().length)})}),c.bind("copy",function(){i(function(){h(c[0],c.val().length)})});var s={cmd:224,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,end:35,home:36,left:37,up:38,right:39,down:40,"delete":46},t=[s.cmd,s.enter,s.shift,s.ctrl,s.alt,s.left,s.up,s.right,s.down]}]}}a.module("tw.form-styling").directive("twPresentationPattern",b)}(window.angular),function(a){function b(){return{restrict:"A",link:function(a,b){if(!b.tooltip)return void console.log("twToolTip requires bootstrap.js");var c=b[0],d={};c.getAttribute("data-placement")||(d.placement="top"),b.tooltip(d),c.setAttribute("tabindex","0"),c.setAttribute("data-toggle","tooltip")}}}a.module("tw.form-styling").directive("twToolTip",b)}(window.angular);